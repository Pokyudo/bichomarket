<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Bonos en Tiempo Real</title>
  <style>
    body { background: #0d1117; color: #c9d1d9; font-family: monospace; padding: 20px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #30363d; padding: 6px; text-align: center; }
    th { background: #161b22; }
    td.green { color: #28f028; }
    td.red { color: #f04747; }
  </style>
</head>
<body>
  <h1>Bonos Argentina en Tiempo Real</h1>
  <table id="tablaBonos"></table>

  <script>
    const bonosEstaticos = {
      "AE38": { vencimiento: "2038-12-31", pagoFinal: 100 },
      "AL30": { vencimiento: "2030-10-15", pagoFinal: 100 }
    };

    function calcularTNA(precio, final, dias) {
      const r = Math.pow(final / precio, 365 / dias) - 1;
      return r * 100;
    }

    async function actualizarTabla() {
      const response = await fetch("https://data912.com/live/arg_bonds");
      const data = await response.json();

      const tabla = document.getElementById("tablaBonos");
      tabla.innerHTML = "";

      const encabezado = `<tr><th>Bono</th><th>Precio</th><th>Vencimiento</th><th>DÃ­as</th><th>TNA</th></tr>`;
      tabla.innerHTML += encabezado;

      const hoy = new Date();

      for (const bono of data) {
        const symbol = bono.symbol;
        const estatico = bonosEstaticos[symbol];
        if (!estatico) continue;

        const precio = bono.c;
        const venc = new Date(estatico.vencimiento);
        const dias = Math.max(1, Math.floor((venc - hoy) / (1000 * 60 * 60 * 24)));
        const tna = calcularTNA(precio, estatico.pagoFinal, dias);

        tabla.innerHTML += `
          <tr>
            <td>${symbol}</td>
            <td>${precio.toFixed(2)}</td>
            <td>${estatico.vencimiento}</td>
            <td>${dias}</td>
            <td class="${tna > 0 ? 'green' : 'red'}">${tna.toFixed(2)}%</td>
          </tr>`;
      }
    }

    setInterval(actualizarTabla, 10000); // cada 10 segundos
    actualizarTabla();
  </script>
</body>
</html>
